###PhotonFabric VideoKit – merge (DE)

##Kurzbeschreibung
##----------------
Kombiniert Videos mit zusätzlichen Videos und/oder Audiospuren und/oder Untertiteldateien. Unterstützt interaktiven Modus (ohne Dateiangabe) und CLI-Modus (mit Dateien und Flags). Auflösung, Vereinheitlichungs-Strategie, Offsets und optionale Verlängerung („extend“) können gezielt gewählt werden. Vorhandene Streams werden – wo möglich – verlustfrei übernommen; notwendige Re-Encodes erfolgen container-/codec-konform. Das erste gefundene Cover/Thumbnail aus den Eingaben wird extrahiert und ins Ergebnisvideo eingebettet.

##Aufruf
##------
video merge [DATEIEN] [--target-res MODUS] [--offset T] [--pause T] [--audio-offset T] [--subtitle-offset T] [--extend] [--format FORMAT] [--codec CODEC] [--preset PRESET] [--output PFAD]

##Optionen & Flags
##----------------
#--target-res, -tr: # <string> (default=no-scale)
                   Vereinheitlichung von Auflösung.
                   §match-first§ Alle Clips auf Auflösung des ersten Videos bringen (Pad/Crop interaktiv wählbar).
                   §no-scale§ Keine Skalierung; kleinere Clips werden gepadded.
                   §smallest§ Auf die kleinste gemeinsam mögliche Größe skalieren.
                   §average§ Auf Durchschnitt der Quellgrößen skalieren.
                   §largest§ Auf die größte Quellgröße skalieren.
                   §fixed:WxH§ Feste Zielgröße direkt setzen (z. B. fixed:1920x1080).
                   §WxH§ Kurzform für fixed (z. B. 1920x1080).

#--offset, -O: # <string> (default=0)
              Startversatz vor dem ersten Clip bzw. globaler Versatz für das Video im „Video + Assets“-Modus. Formate: „30s“, „-12“, „1:23:45.67“

#--pause, -pa: # <string> (default=0)
              Stille/Schwarzblende zwischen aufeinanderfolgenden Clips. Zeitangaben wie bei --offset.

#--audio-offset, -ao: # <string> (default=0)
                     Versatz für zusätzlich hinzugefügte Audiodateien relativ zum Video. Zeitangaben wie oben; zusätzlich negative Werte möglich.

#--subtitle-offset, -so: # <string> (default=0)
                        Versatz für zusätzlich hinzugefügte Untertiteldateien relativ zum Video. Zeitangaben wie oben; zusätzlich negative Werte möglich.

#--burn-subtitle, -bs: # <flag>
                      Untertitel einbrennen (Experimentell; je nach Build ggf. ohne Wirkung).

#--subtitle-name, -sn: # <string>
                      Einheitlicher Titel für neu hinzugefügte Untertitelspuren (überschreibt automatische Namensgebung).

#--audio-name, -an: # <string>
                   Einheitlicher Titel für neu hinzugefügte Audiospuren (überschreibt automatische Namensgebung).

#--extend, -e: # <flag>
              Verlängert das Video (Schwarzbild + Stille) bis zur längsten zusätzlichen Spur (Audio/Untertitel).

#--format, -f: # <string> (default=Quelle oder mp4)
              Zielcontainer.
              §keep§ Behält den Quellcontainer je Datei.
              §mp4§ Unterstützt mehrere Audio- und Untertitelspuren, einige Metadaten, Kapitel und Thumbnail. Weit verbreitet, hohe kompatibilität, ideal für Web und Mobile. Codecs: h264, hevc, av1, mpeg4
              §mkv§ Unterstützt mehrere Audio- und Untertitelspuren, alle Metadaten, Kapitel, Thumbnail, Alpha-Kanal und die meisten codecs, ideal für die Archivierung von multimedialen Videos. Codecs: h264, hevc, av1, vp9, vp8, mpeg2video, mpeg4, prores, dnxhd, jpeg2000, mjpeg, ffv1, huffyuv, utvideo, theora, png, magicyuv, cineform, rawvideo
              §avi§ Unterstützt wenige Metadaten und Alpha-Kanal. Älteres Format mit größeren Datenvolumen und weniger effizienter Komprimierung. Codecs: mpeg4, cineform, mjpeg, huffyuv, utvideo, hap, rawvideo
              §mov§ Unterstützt mehrere Audio- und Untertitelspuren, einige Metadaten, Kapitel und Alpha-Kanal. Apple QuickTime-Format, hohe Qualität, am besten geeignet für macOS/iOS. Codecs: prores, dnxhd, h264, hevc, jpeg2000, qtrle, hap, cineform, mjpeg, png
              §webm§ Unterstützt alle Metadaten. Für die Verwendung im Internet optimiertes offenes Format. Codecs: vp9, vp8, av1
              §mpeg§ Früher Standard (MPEG-1/2), der in älteren Systemen und für DVDs verwendet wird. Codecs: mpeg1video, mpeg2video

#--codec, -c: # <string> (default=quellnah/geeignet)
             Ziel-Video-Codec.
             §copy§ Versucht Bitstream-Copy.
             §h264§ Weit verbreitet mit guter Effizienz und breiter Hardware-Unterstützung. Mathematisch verlustfrei möglich.
             §hevc§ Effizienter als H.264 (typisch 25–50 % geringere Bitrate bei ähnlicher Qualität). Benötigt neuere Geräte/Player und passende Lizenzierung. Mathematisch verlustfrei möglich.
             §av1§ Royalty-free und sehr effizient; Unterstützung wächst schnell in Browsern und Hardware. Mathematisch verlustfrei möglich.
             §vp9§ Offener Web-Codec; häufig 20–50 % kleiner als H.264 bei ähnlicher Qualität. Typisch in WebM. Mathematisch verlustfrei möglich.
             §vp8§ Älterer offener Web-Codec (8-bit 4:2:0), sehr kompatibel. Typisch in WebM.
             §mpeg4§ Älter als H.264, geringere Effizienz, aber einfach zu dekodieren. Historisch Xvid/DivX-Klasse, heute eher für Kompatibilität.
             §prores§ Intraframe-Mezzanine für Schnitt/Grading (10-bit 4:2:2/4:4:4:4 abhängig vom Profil); Alpha möglich.
             §dnxhd§ Intraframe-Mezzanine für Schnitt/Proxies.
             §jpeg2000§ Intraframe, verbreitet u. a. in DCP/Archivierung. Alpha möglich; Mathematisch verlustfrei möglich.
             §mjpeg§ Intraframe, robust und sehr kompatibel. Größere Dateien; sinnvoll für Capture/Intermediates.
             §ffv1§ Verlustfreier Intraframe-Codec mit hoher Effizienz; beliebt für Archivierung. Unterstützt u. a. 10-bit und optionale Prüfsummen. Mathematisch verlustfrei möglich; Alpha möglich.
             §huffyuv§ Verlustfrei und sehr schnell; historisch weit verbreitet. Mathematisch verlustfrei und Alpha möglich.
             §utvideo§ Verlustfrei, schnell und plattformübergreifend. Beliebt als Intermediate, mathematisch verlustfrei möglich, unterstützt auch RGBA.
             §theora§ Freier älterer Videocodec, heute selten im Einsatz.
             §qtrle§ Intraframe mit Alpha-Unterstützung; gut für UI-Captures und Grafiken. Typisch im MOV-Container. Mathematisch verlustfrei möglich.
             §hap§ GPU-freundlicher Intraframe-Codec für Echtzeit-Playback mit Alphaunterstützung. Weit verbreitet in Live/Installations-Setups; meist als MOV.
             §rawvideo§ Unkomprimiert und maximal kompatibel. Sehr große Dateien; praktisch keine Encoder-Optionen. Verlusstfrei per definition und Alpha möglich (RGBA).
             §png§ PNG-basiertes Intraframe-Video; verlustfrei und mit Alpha möglich. Geeignet für Grafiken/Compositing, aber deutlich größere Dateien. Mathematisch verlustfrei möglich; Alpha möglich.
             §magicyuv§ Sehr schneller, mathematisch verlustfreier Intraframe-Codec. Alpha (RGBA) möglich.
             §cineform§ Intraframe-Codec für performantes Editing; 10-/12-bit YUV/RGB je nach Build. Alpha möglich (RGBA).
             §mpeg1video§ Älterer Standard (VCD/Frühzeit von MPEG), robust bei .mpg/.mpeg (MPEG-PS). Verwandt mit dem MPEG-PS-Container.
             §mpeg2video§ Klassischer Broadcast/DVD-Codec; robust, aber höhere Bitraten. Gängig in MPEG-TS/PS und Archiv-Workflows.

#--preset, -pr: # <string> (default=casual)
              Qualitäts-/Geschwindigkeitsprofil; kann intern max_fps, Faststart, Skalierung vorgeben (nur für messenger & web).
              §messenger360p§ Sehr schnell, niedrige Qualität, 640px Breite (360p), kleine Datei für Chat-Apps (H.264/MP4 empfohlen).
              §messenger720p§ Schnelles Encoding, gute Dateigröße, 1280px Breite (720p); ideal für Messenger.
              §web§ Schnelles Encoding, reduzierte Größe, maximale kompatibilität und ordentliche Qualität für Online-Nutzung.
              §casual§ Ausgewogene Qualität, Geschwindigkeit und maximale kompatibilität (für Alltags-Videos).
              §cinema§ Hohe Qualität, langsameres Encoding und hohe kompatibilität (filmähnlicher Output).
              §studio§ Sehr hohe Qualität, evtl. auf kosten von kompatibilität für Master/Archiv in praxisnaher Größe.
              §ultra§ Maximale visuelle Qualität, ohne Rücksicht auf kompatibilität ohne echtes Lossless.
              §lossless§ Mathematisch verlustfrei (wo der Codec es unterstützt), sonst near-lossless so gut die Format + Codec Kombination es zulässt. Sehr große Dateien, langsames Encoding.

#--output, -o: # <string> (default=auto)
              Ausgabepfad/-datei. Ohne Angabe: Name aus erstem Video + Suffix „_merged“ und Extension=Zielcontainer.

##Hinweise
##--------

Streams & Metadaten
• Bestehende Video/Audio/Untertitel/Kapitel/Metadaten/Thumbnails des Hauptvideos werden gemappt (wenn es die Format + Codec Kombination zulässt); Zusatz-Subs werden in MP4/MOV zu „mov_text“ konvertiert, in MKV/MOV/AVI i. d. R. „copy“.
• Titel/Sprache neuer Spuren werden, falls nicht explizit gesetzt, aus Dateinamen/Tags heuristisch abgeleitet (ISO-639-2).
• Container-spezifische Default-Audio-Codecs (z. B. AAC für MP4/MOV, Opus für WebM, AC-3 für AVI) werden automatisch gewählt.

Alpha & Pixelformat
• Hat eine Quelle Alpha und die gewählte Ziel-Kombination (Container/Codec) unterstützt keinen Alphakanal, erscheint eine Warnung.
• Unterstützte Alpha-Kombinationen (Beispiele): MOV+ProRes 4444, MKV/WebM+VP9/AV1(Alpha), MKV/AVI+UtVideo/FFV1/PNG/QTRLE/RGBA.

Thumbnail
• Das erste gefundene Eingabe-Thumbnail (Cover) wird extrahiert und nach erfolgreicher Verarbeitung in die Zieldatei eingebettet.

Interaktiver Ablauf
• Auswahl: Container → Codec (nur wenn relevant) → Preset (falls Re-Encode) → Zielstrategie/Größe → Offsets/Pausen → Ausgabe.

Kompatibilität & Faststart
• Für MP4 kann – abhängig vom Preset – „+faststart“ gesetzt werden (optimiert Web-Startzeiten).
• „m4v“ wird als Alias von „mp4“ behandelt.

Rückgabewerte
• 0 Erfolg; ≠0 Fehler von ffmpeg/Umgebung.

Batch-Platzhalter
• Das %-Zeichen nummeriert Dateien: file%.mkv → file001.mkv, file6.mkv, file030.mkv, …

##Beispiele
##---------

Zwei Clips nahtlos zusammenfügen, Größe an ersten Clip anpassen, kleine Pause dazwischen:
video merge a.mp4 b.mp4 --target-res match-first --pause 1.0s --format mkv --codec h264 --preset casual

Mehrere Clips ohne Skalierung (kleinere werden gepadded), visuell verlustarm in ProRes (MOV):
video merge part1.mov part2.mov part3.mov -tr no-scale -f mov -c prores -pr studio

Ein Video mit zusätzlicher Audiospur und Untertitel kombinieren (schnelles Muxing, Video bleibt „copy“), Offsets setzen:
video merge movie.mkv dub_de.aac subs_en.srt --audio-offset 1.5s --subtitle-offset 2% --format mkv

Video auf feste Größe und geringere FPS vereinheitlichen (Concat-Pfad), hochwertiges Archiv-Codec:
video merge c1.mkv c2.mkv --target-res fixed:1920x1080 -f mkv -c ffv1 -pr lossless

Externe Audiospur länger als das Video → bis zum Ende verlängern:
video merge base.mp4 commentary.wav --extend -f mp4 -c h264 -pr casual

Einheitliche Titel für neue Spuren vergeben:
video merge clip.mp4 dub_fr.aac subs_de.vtt --audio-name "Französisch" --subtitle-name "Deutsch" -f mp4
